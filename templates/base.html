{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}TabGraphSyn - Web{% endblock %}</title>

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />

    <!-- Page-specific Styles -->
    {% block extra_css %}{% endblock %}
    {% block extra_head %}{% endblock %}
</head>
<body>
    <div class="app-main">
            <div class="app-main-inner">
                <header class="app-topbar">
                    <a href="{% url 'synthetic:upload' %}" class="app-topbar-brand">
                        <span class="brand-badge">TG</span>
                        <span>TabGraphSyn Workspace</span>
                    </a>
                    <div class="app-topbar-actions">
                        <div class="app-topbar-status">
                            <span class="status-dot"></span>
                            <span>Ready to orchestrate</span>
                        </div>
                        {% if workspace_user %}
                            <div class="app-topbar-user">
                                {% with workspace_user.full_name|default:workspace_user.username as display_name %}
                                <div class="user-pill">
                                    <div class="user-avatar">{{ display_name|slice:":1"|upper }}</div>
                                    <div>
                                        <div class="user-name">{{ display_name }}</div>
                                        <div class="user-meta">{{ workspace_user.email|default:workspace_user.username }}</div>
                                    </div>
                                </div>
                                {% endwith %}
                                <div class="app-topbar-actions">
                                    <a href="{% url 'synthetic:history' %}" class="secondary-button compact">Run history</a>
                                    <a href="{% url 'accounts:logout' %}?next={{ request.get_full_path|urlencode }}" class="secondary-button compact">Sign out</a>
                                </div>
                            </div>
                        {% else %}
                            <a class="primary-button compact" href="{% url 'accounts:login' %}">Sign in</a>
                        {% endif %}
                    </div>
                </header>
                <div class="content-container">
                    {% if messages %}
                        <div class="app-flash-stack">
                            {% for message in messages %}
                                <div class="alert alert-{{ message.level_tag }}">{{ message }}</div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {% block content %}{% endblock %}
                </div>
            </div>
            <footer class="app-footer">
                <div class="app-footer-inner">
                    TabGraphSyn - Guided orchestration. Built for confidential synthetic data generation.
                </div>
            </footer>
        </div>
    {% block extra_scripts %}{% endblock %}
</body>
</html>
